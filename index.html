<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLB Playoff outlook</title>
    <!-- Updated: Fixed slider logic and title -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🏟️ MLB Playoff Picture</h1>
            <p class="subtitle">Explore how the final 3 games affect playoff seeding</p>
        </header>

        <div class="intro-section">
            <h2>Current Standings</h2>
            <p>Three games remain in the 2025 MLB regular season. Six American League teams are still battling for playoff positioning:</p>
            <ul>
                <li><strong>Yankees and Blue Jays (both 91–68):</strong> fighting for the AL East title</li>
                <li><strong>Guardians and Tigers (both 86–73):</strong> battling for the AL Central</li>
                <li><strong>Red Sox (87–72) and Astros (85–74):</strong> chasing Wild Card spots</li>
            </ul>
            <p>MLB's playoff format includes 3 division winners and 3 Wild Card teams. No Game 163: ties are settled by head-to-head season series.</p>
        </div>

        <div class="mode-toggle-section">
            <h2>Playoff Simulator</h2>
            <div class="league-toggle">
                <button id="al-league" class="league-btn active">American League</button>
                <button id="nl-league" class="league-btn">National League</button>
            </div>
            <div class="mode-toggle">
                <button id="simulation-mode" class="mode-btn active">Simulation Mode</button>
                <button id="live-mode" class="mode-btn">Live Data Mode</button>
            </div>
            <p class="mode-description" id="mode-description">
                Explore different game outcomes using sliders below
            </p>
        </div>

        <div class="controls-section" id="simulation-controls">
            <h2>Game Outcomes</h2>
            <div class="sliders-container" id="sliders-container">
                <!-- AL Sliders -->
                <div id="al-sliders">
                    <div class="slider-group">
                        <div class="series-header">
                            <div class="team-logo">🏟️</div>
                            <div class="series-title">Rangers @ Guardians</div>
                            <div class="team-logo">🏟️</div>
                        </div>
                        <div class="slider-wrapper">
                            <span class="team-name">Rangers</span>
                            <input type="range" id="rangers-guardians" min="0" max="3" value="0" class="slider">
                            <span class="team-name">Guardians</span>
                        </div>
                        <div class="slider-info">
                            <div class="team-record">
                                <div class="series-record">Rangers: <span id="rangers-wins">3</span></div>
                                <div class="current-record">Current: 80-79</div>
                                <div class="simulated-record">Simulated: <span id="rangers-simulated">83-79</span></div>
                            </div>
                            <div class="team-record">
                                <div class="series-record">Guardians: <span id="guardians-wins">0</span></div>
                                <div class="current-record">Current: 86-73</div>
                                <div class="simulated-record">Simulated: <span id="guardians-simulated">86-76</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="slider-group">
                        <div class="series-header">
                            <div class="team-logo">🏟️</div>
                            <div class="series-title">Tigers @ Red Sox</div>
                            <div class="team-logo">🏟️</div>
                        </div>
                        <div class="slider-wrapper">
                            <span class="team-name">Tigers</span>
                            <input type="range" id="tigers-redsox" min="0" max="3" value="0" class="slider">
                            <span class="team-name">Red Sox</span>
                        </div>
                        <div class="slider-info">
                            <div class="team-record">
                                <div class="series-record">Tigers: <span id="tigers-wins">3</span></div>
                                <div class="current-record">Current: 86-73</div>
                                <div class="simulated-record">Simulated: <span id="tigers-simulated">89-73</span></div>
                            </div>
                            <div class="team-record">
                                <div class="series-record">Red Sox: <span id="redsox-wins">0</span></div>
                                <div class="current-record">Current: 87-72</div>
                                <div class="simulated-record">Simulated: <span id="redsox-simulated">87-75</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="slider-group">
                        <div class="series-header">
                            <div class="team-logo">🏟️</div>
                            <div class="series-title">Astros @ Angels</div>
                            <div class="team-logo">🏟️</div>
                        </div>
                        <div class="slider-wrapper">
                            <span class="team-name">Astros</span>
                            <input type="range" id="astros-angels" min="0" max="3" value="0" class="slider">
                            <span class="team-name">Angels</span>
                        </div>
                        <div class="slider-info">
                            <div class="team-record">
                                <div class="series-record">Astros: <span id="astros-wins">3</span></div>
                                <div class="current-record">Current: 85-74</div>
                                <div class="simulated-record">Simulated: <span id="astros-simulated">88-74</span></div>
                            </div>
                            <div class="team-record">
                                <div class="series-record">Angels: <span id="angels-wins">0</span></div>
                                <div class="current-record">Current: 71-88</div>
                                <div class="simulated-record">Simulated: <span id="angels-simulated">71-91</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="slider-group">
                        <div class="series-header">
                            <div class="team-logo">🏟️</div>
                            <div class="series-title">Orioles @ Yankees</div>
                            <div class="team-logo">🏟️</div>
                        </div>
                        <div class="slider-wrapper">
                            <span class="team-name">Orioles</span>
                            <input type="range" id="orioles-yankees" min="0" max="3" value="0" class="slider">
                            <span class="team-name">Yankees</span>
                        </div>
                        <div class="slider-info">
                            <div class="team-record">
                                <div class="series-record">Orioles: <span id="orioles-wins">3</span></div>
                                <div class="current-record">Current: 75-84</div>
                                <div class="simulated-record">Simulated: <span id="orioles-simulated">78-84</span></div>
                            </div>
                            <div class="team-record">
                                <div class="series-record">Yankees: <span id="yankees-wins">0</span></div>
                                <div class="current-record">Current: 91-68</div>
                                <div class="simulated-record">Simulated: <span id="yankees-simulated">91-71</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="slider-group">
                        <div class="series-header">
                            <div class="team-logo">🏟️</div>
                            <div class="series-title">Rays @ Blue Jays</div>
                            <div class="team-logo">🏟️</div>
                        </div>
                        <div class="slider-wrapper">
                            <span class="team-name">Rays</span>
                            <input type="range" id="rays-bluejays" min="0" max="3" value="0" class="slider">
                            <span class="team-name">Blue Jays</span>
                        </div>
                        <div class="slider-info">
                            <div class="team-record">
                                <div class="series-record">Rays: <span id="rays-wins">3</span></div>
                                <div class="current-record">Current: 77-82</div>
                                <div class="simulated-record">Simulated: <span id="rays-simulated">80-82</span></div>
                            </div>
                            <div class="team-record">
                                <div class="series-record">Blue Jays: <span id="bluejays-wins">0</span></div>
                                <div class="current-record">Current: 91-68</div>
                                <div class="simulated-record">Simulated: <span id="bluejays-simulated">91-71</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NL Sliders -->
                <div id="nl-sliders" class="hidden">
                    <div class="slider-group">
                        <div class="series-header">
                            <div class="team-logo">🏟️</div>
                            <div class="series-title">Cubs @ Cardinals</div>
                            <div class="team-logo">🏟️</div>
                        </div>
                        <div class="slider-wrapper">
                            <span class="team-name">Cubs</span>
                            <input type="range" id="cubs-cardinals" min="0" max="3" value="2" class="slider">
                            <span class="team-name">Cardinals</span>
                        </div>
                        <div class="slider-info">
                            <div class="team-record">
                                <div class="series-record">Cubs: <span id="cubs-wins">1</span></div>
                                <div class="current-record">Current: 87-72</div>
                                <div class="simulated-record">Simulated: <span id="cubs-simulated">88-74</span></div>
                            </div>
                            <div class="team-record">
                                <div class="series-record">Cardinals: <span id="cardinals-wins">2</span></div>
                                <div class="current-record">Current: 86-73</div>
                                <div class="simulated-record">Simulated: <span id="cardinals-simulated">88-73</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="slider-group">
                        <div class="series-header">
                            <div class="team-logo">🏟️</div>
                            <div class="series-title">Diamondbacks @ Padres</div>
                            <div class="team-logo">🏟️</div>
                        </div>
                        <div class="slider-wrapper">
                            <span class="team-name">Diamondbacks</span>
                            <input type="range" id="diamondbacks-padres" min="0" max="3" value="1" class="slider">
                            <span class="team-name">Padres</span>
                        </div>
                        <div class="slider-info">
                            <div class="team-record">
                                <div class="series-record">Diamondbacks: <span id="diamondbacks-wins">2</span></div>
                                <div class="current-record">Current: 86-73</div>
                                <div class="simulated-record">Simulated: <span id="diamondbacks-simulated">88-73</span></div>
                            </div>
                            <div class="team-record">
                                <div class="series-record">Padres: <span id="padres-wins">1</span></div>
                                <div class="current-record">Current: 87-72</div>
                                <div class="simulated-record">Simulated: <span id="padres-simulated">88-73</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="slider-group">
                        <div class="series-header">
                            <div class="team-logo">🏟️</div>
                            <div class="series-title">Mets @ Marlins</div>
                            <div class="team-logo">🏟️</div>
                        </div>
                        <div class="slider-wrapper">
                            <span class="team-name">Mets</span>
                            <input type="range" id="mets-marlins" min="0" max="3" value="2" class="slider">
                            <span class="team-name">Marlins</span>
                        </div>
                        <div class="slider-info">
                            <div class="team-record">
                                <div class="series-record">Mets: <span id="mets-wins">1</span></div>
                                <div class="current-record">Current: 86-73</div>
                                <div class="simulated-record">Simulated: <span id="mets-simulated">87-75</span></div>
                            </div>
                            <div class="team-record">
                                <div class="series-record">Marlins: <span id="marlins-wins">2</span></div>
                                <div class="current-record">Current: 85-74</div>
                                <div class="simulated-record">Simulated: <span id="marlins-simulated">87-74</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="slider-group">
                        <div class="series-header">
                            <div class="team-logo">🏟️</div>
                            <div class="series-title">Reds @ Brewers</div>
                            <div class="team-logo">🏟️</div>
                        </div>
                        <div class="slider-wrapper">
                            <span class="team-name">Reds</span>
                            <input type="range" id="reds-brewers" min="0" max="3" value="0" class="slider">
                            <span class="team-name">Brewers</span>
                        </div>
                        <div class="slider-info">
                            <div class="team-record">
                                <div class="series-record">Reds: <span id="reds-wins">3</span></div>
                                <div class="current-record">Current: 85-74</div>
                                <div class="simulated-record">Simulated: <span id="reds-simulated">88-74</span></div>
                            </div>
                            <div class="team-record">
                                <div class="series-record">Brewers: <span id="brewers-wins">0</span></div>
                                <div class="current-record">Current: 96-63</div>
                                <div class="simulated-record">Simulated: <span id="brewers-simulated">96-66</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dropdowns-container">
                <div class="dropdown-group" id="division-override-group">
                    <label for="division-override" id="division-override-label">AL East Winner Override</label>
                    <select id="division-override">
                        <option value="auto">Auto (based on record)</option>
                        <option value="yankees">Yankees</option>
                        <option value="bluejays">Blue Jays</option>
                    </select>
                </div>

                <div class="dropdown-group">
                    <label for="bracket-toggle">Bracket Display</label>
                    <select id="bracket-toggle">
                        <option value="show">Show Bracket</option>
                        <option value="hide">Hide Bracket</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="live-data-section hidden" id="live-data-section">
            <h2>📡 Live Game Data</h2>
            <div class="live-status">
                <div class="last-updated">Last updated: <span id="last-updated">Loading...</span></div>
                <div class="auto-refresh">
                    <label>
                        <input type="checkbox" id="auto-refresh" checked> Auto-refresh every 2 minutes
                    </label>
                </div>
            </div>
            <div class="live-note">
                <p><em>Note: Attempting to fetch live data from the official MLB Stats API. If unavailable, simulated data will be shown as fallback.</em></p>
            </div>
            <div class="live-games" id="live-games">
                <!-- Live game data will be populated here -->
            </div>
        </div>

        <div class="output-section">
            <h2>📊 Output Table</h2>
            <p class="output-subtitle" id="output-subtitle">Dynamically updates based on slider inputs:</p>
            <div class="table-container">
                <table id="output-table">
                    <thead>
                        <tr>
                            <th>Team</th>
                            <th>Final Record</th>
                            <th>Outcome</th>
                        </tr>
                    </thead>
                    <tbody id="output-tbody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="bracket-section" id="bracket-section">
            <h2>🏆 Playoff Bracket</h2>
            <div class="bracket-container" id="bracket-container">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>

        <div class="permutation-section" id="permutation-section">
            <h2>📊 Playoff Permutations Chart</h2>
            <p class="permutation-description">Percentage chance of each team reaching each playoff position based on all possible series outcomes</p>
            <div class="permutation-table-container">
                <table class="permutation-table" id="permutation-table">
                    <thead>
                        <tr>
                            <th>Team</th>
                            <th>1 Seed</th>
                            <th>2 Seed</th>
                            <th>3 Seed</th>
                            <th>Wild Card 1</th>
                            <th>Wild Card 2</th>
                            <th>Wild Card 3</th>
                        </tr>
                    </thead>
                    <tbody id="permutation-tbody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="permutation-info" id="permutation-info">
                <!-- Permutation information will be displayed here -->
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>
